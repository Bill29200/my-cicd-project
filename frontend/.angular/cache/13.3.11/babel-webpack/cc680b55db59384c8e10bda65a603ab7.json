{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { catchError, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let DataService = /*#__PURE__*/(() => {\n  class DataService {\n    // roleActual!: Role;\n    // actualFastfood!: Fastfood;\n    // actualFamilles: FamilleProduit[] = [];\n    // actualProduits: Produit[] = [];\n    //\n    // currentGerant! : User;\n    // currentServeur!: User;\n    constructor(http) {\n      this.http = http;\n      this.apiUrl = 'http://localhost:8080/api';\n    } // ---------------------------------------------------------------------------------------------  Users\n\n\n    login(nom, password) {\n      const params = new HttpParams().set('nom', nom).set('password', password);\n      return this.http.get(`${this.apiUrl}/login`, {\n        params\n      }).pipe(catchError(err => throwError(() => new Error('Erreur lors de la connexion'))));\n    }\n\n    getAllUsers() {\n      return this.http.get(`${this.apiUrl}/users`).pipe(catchError(err => throwError(() => new Error('Erreur lors de la récupération des utilisateurs'))));\n    }\n\n    getUserById(id) {\n      return this.http.get(`${this.apiUrl}/users/${id}`).pipe(catchError(err => throwError(() => new Error('Utilisateur non trouvé'))));\n    }\n\n    createUser(user) {\n      return this.http.post(`${this.apiUrl}/users`, user).pipe(catchError(err => {\n        var _a;\n\n        if (err.status === 400 && ((_a = err.error) === null || _a === void 0 ? void 0 : _a.message.includes('nom'))) {\n          return throwError(() => new Error(`Le nom \"${user.nom}\" est déjà pris`));\n        }\n\n        return throwError(() => new Error('Erreur lors de la création de l\\'utilisateur'));\n      }));\n    }\n\n    updateUser(id, user) {\n      return this.http.put(`${this.apiUrl}/users/${id}`, user).pipe(catchError(err => throwError(() => new Error('Erreur lors de la mise à jour de l\\'utilisateur'))));\n    }\n\n    deleteUser(id) {\n      return this.http.delete(`${this.apiUrl}/users/${id}`).pipe(catchError(err => throwError(() => new Error('Erreur lors de la suppression de l\\'utilisateur'))));\n    } // ------------------------------------------------------------------------------------------ Fastfoods\n\n\n    getAllFastfoods() {\n      return this.http.get(`${this.apiUrl}/fastfoods`).pipe(catchError(err => throwError(() => new Error('Erreur lors de la récupération des fastfoods'))));\n    }\n\n    getFastfoodById(id) {\n      return this.http.get(`${this.apiUrl}/fastfoods/${id}`).pipe(catchError(err => throwError(() => new Error('Fastfood non trouvé'))));\n    }\n\n    createFastfood(dto) {\n      return this.http.post(`${this.apiUrl}/fastfoods`, dto).pipe(catchError(err => {\n        if (err.status === 400) {\n          return throwError(() => new Error('Données invalides pour la création du fastfood'));\n        }\n\n        return throwError(() => new Error('Erreur lors de la création du fastfood'));\n      }));\n    }\n\n    updateFastfood(id, fastfood) {\n      return this.http.put(`${this.apiUrl}/fastfoods/${id}`, fastfood).pipe(catchError(err => throwError(() => new Error('Erreur lors de la mise à jour du fastfood'))));\n    }\n\n    deleteFastfood(id) {\n      return this.http.delete(`${this.apiUrl}/fastfoods/${id}`).pipe(catchError(err => throwError(() => new Error('Erreur lors de la suppression du fastfood'))));\n    }\n\n    searchFastfoods(keyword) {\n      const params = new HttpParams().set('keyword', keyword);\n      return this.http.get(`${this.apiUrl}/fastfoods/search`, {\n        params\n      }).pipe(catchError(err => throwError(() => new Error('Erreur lors de la recherche des fastfoods'))));\n    } // Produits\n\n\n    getAllProduits() {\n      return this.http.get(`${this.apiUrl}/produits`).pipe(catchError(err => throwError(() => new Error('Erreur lors de la récupération des produits'))));\n    }\n\n    getProduitById(id) {\n      return this.http.get(`${this.apiUrl}/produits/${id}`).pipe(catchError(err => throwError(() => new Error('Produit non trouvé'))));\n    }\n\n    createProduit(produit) {\n      return this.http.post(`${this.apiUrl}/produits`, produit).pipe(catchError(err => throwError(() => new Error('Erreur lors de la création du produit'))));\n    }\n\n    updateProduit(id, produit) {\n      return this.http.put(`${this.apiUrl}/produits/${id}`, produit).pipe(catchError(err => throwError(() => new Error('Erreur lors de la mise à jour du produit'))));\n    }\n\n    deleteProduit(id) {\n      return this.http.delete(`${this.apiUrl}/produits/${id}`).pipe(catchError(err => throwError(() => new Error('Erreur lors de la suppression du produit'))));\n    }\n\n    searchProduits(nomProd) {\n      const params = new HttpParams().set('nomProd', nomProd);\n      return this.http.get(`${this.apiUrl}/produits/search`, {\n        params\n      }).pipe(catchError(err => throwError(() => new Error('Erreur lors de la recherche des produits'))));\n    }\n\n    filterProduitsByFamille(familleId) {\n      const params = new HttpParams().set('familleId', familleId.toString());\n      return this.http.get(`${this.apiUrl}/produits/filter`, {\n        params\n      }).pipe(catchError(err => throwError(() => new Error('Erreur lors du filtrage des produits'))));\n    } // FamilleProduits\n\n\n    getAllFamilleProduits() {\n      return this.http.get(`${this.apiUrl}/familles`).pipe(catchError(err => throwError(() => new Error('Erreur lors de la récupération des familles'))));\n    }\n\n    getFamilleProduitById(id) {\n      return this.http.get(`${this.apiUrl}/familles/${id}`).pipe(catchError(err => throwError(() => new Error('Famille non trouvée'))));\n    }\n\n    createFamilleProduit(famille) {\n      return this.http.post(`${this.apiUrl}/familles`, famille).pipe(catchError(err => throwError(() => new Error('Erreur lors de la création de la famille'))));\n    }\n\n    updateFamilleProduit(id, famille) {\n      return this.http.put(`${this.apiUrl}/familles/${id}`, famille).pipe(catchError(err => throwError(() => new Error('Erreur lors de la mise à jour de la famille'))));\n    }\n\n    deleteFamilleProduit(id) {\n      return this.http.delete(`${this.apiUrl}/familles/${id}`).pipe(catchError(err => throwError(() => new Error('Erreur lors de la suppression de la famille'))));\n    } // Commandes\n\n\n    getAllCommandes() {\n      return this.http.get(`${this.apiUrl}/commandes`).pipe(catchError(err => throwError(() => new Error('Erreur lors de la récupération des commandes'))));\n    }\n\n    getCommandeById(id) {\n      return this.http.get(`${this.apiUrl}/commandes/${id}`).pipe(catchError(err => throwError(() => new Error('Commande non trouvée'))));\n    }\n\n    createCommande(commande) {\n      return this.http.post(`${this.apiUrl}/commandes`, commande).pipe(catchError(err => throwError(() => new Error('Erreur lors de la création de la commande'))));\n    }\n\n    updateCommande(id, commande) {\n      return this.http.put(`${this.apiUrl}/commandes/${id}`, commande).pipe(catchError(err => throwError(() => new Error('Erreur lors de la mise à jour de la commande'))));\n    }\n\n    deleteCommande(id) {\n      return this.http.delete(`${this.apiUrl}/commandes/${id}`).pipe(catchError(err => throwError(() => new Error('Erreur lors de la suppression de la commande'))));\n    }\n\n    filterCommandesByEtat(etat) {\n      const params = new HttpParams().set('etat', etat);\n      return this.http.get(`${this.apiUrl}/commandes/filter`, {\n        params\n      }).pipe(catchError(err => throwError(() => new Error('Erreur lors du filtrage des commandes'))));\n    }\n\n  }\n\n  DataService.ɵfac = function DataService_Factory(t) {\n    return new (t || DataService)(i0.ɵɵinject(i1.HttpClient));\n  };\n\n  DataService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: DataService,\n    factory: DataService.ɵfac,\n    providedIn: 'root'\n  });\n  return DataService;\n})();","map":null,"metadata":{},"sourceType":"module"}