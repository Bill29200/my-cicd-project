{"ast":null,"code":"import { Etat } from '../../enums/etat';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/data.service\";\nimport * as i2 from \"../../services/auth.service\";\nexport let ServeurDashboardComponent = /*#__PURE__*/(() => {\n  class ServeurDashboardComponent {\n    constructor(dataService, authService) {\n      var _a;\n\n      this.dataService = dataService;\n      this.authService = authService;\n      this.Etat = Etat; // Exposer l'enum pour le template\n\n      this.commandes = [];\n      this.fastfood = (_a = this.authService.getCurrentUser()) === null || _a === void 0 ? void 0 : _a.fastfoodId;\n      this.user = this.authService.getCurrentUser();\n      this.search = {\n        [Etat.CREEE]: '',\n        [Etat.EN_ATTENTE]: '',\n        [Etat.PRETE]: '',\n        [Etat.LIVREE]: ''\n      };\n    }\n\n    ngOnInit() {\n      this.loadCommandes();\n    }\n\n    loadCommandes() {// this.dataService.getAllCommandes().subscribe(commandes => {\n      //   if (this.fastfood) {\n      //     this.commandes = commandes.filter(c =>\n      //       c.produitIds.some(id => this.getProduitFastfoodId(id) === this.fastfood!.fastfoodId)\n      //     );\n      //   } else {\n      //     this.commandes = [];\n      //   }\n      // });\n    }\n\n    searchCommandes(etat) {\n      if (this.search[etat]) {\n        this.dataService.filterCommandesByEtat(etat).subscribe(commandes => {\n          if (this.fastfood) {\n            this.commandes = commandes.filter(c => // c.produitIds.some(id => this.getProduitFastfoodId(id) === this.fastfood!.fastfoodId) &&\n            c.prixGlobal.toString().includes(this.search[etat]));\n          } else {\n            this.commandes = [];\n          }\n        });\n      } else {\n        this.loadCommandes();\n      }\n    }\n\n    nextEtat(commande) {\n      let newEtat;\n\n      switch (commande.etat) {\n        case Etat.CREEE:\n          newEtat = Etat.EN_ATTENTE;\n          break;\n\n        case Etat.EN_ATTENTE:\n          newEtat = Etat.PRETE;\n          break;\n\n        case Etat.PRETE:\n          newEtat = Etat.LIVREE;\n          break;\n\n        default:\n          return;\n      }\n\n      this.updateCommandeEtat(commande, newEtat);\n    }\n\n    prevEtat(commande) {\n      let newEtat;\n\n      switch (commande.etat) {\n        case Etat.EN_ATTENTE:\n          newEtat = Etat.CREEE;\n          break;\n\n        case Etat.PRETE:\n          newEtat = Etat.EN_ATTENTE;\n          break;\n\n        case Etat.LIVREE:\n          newEtat = Etat.PRETE;\n          break;\n\n        default:\n          return;\n      }\n\n      this.updateCommandeEtat(commande, newEtat);\n    }\n\n    updateCommandeEtat(commande, etat) {\n      const updatedCommande = Object.assign(Object.assign({}, commande), {\n        etat\n      });\n      this.dataService.updateCommande(commande.id, updatedCommande).subscribe(() => this.loadCommandes());\n    }\n\n  }\n\n  ServeurDashboardComponent.ɵfac = function ServeurDashboardComponent_Factory(t) {\n    return new (t || ServeurDashboardComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.AuthService));\n  };\n\n  ServeurDashboardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ServeurDashboardComponent,\n    selectors: [[\"app-serveur-dashboard\"]],\n    decls: 0,\n    vars: 0,\n    template: function ServeurDashboardComponent_Template(rf, ctx) {},\n    styles: [\".card[_ngcontent-%COMP%]{transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}\"]\n  });\n  return ServeurDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}