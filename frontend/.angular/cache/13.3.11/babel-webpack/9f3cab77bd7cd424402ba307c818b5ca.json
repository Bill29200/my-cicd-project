{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/data.service\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../../pipes/filter.pipe\";\n\nfunction GerantDashboardComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\")(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.fastfood.intitule);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" - \", ctx_r0.fastfood.telephone, \" \");\n  }\n}\n\nfunction GerantDashboardComponent_div_9_div_9_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 24);\n  }\n\n  if (rf & 2) {\n    const produit_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"alt\", produit_r4.nomProd);\n    i0.ɵɵproperty(\"src\", produit_r4.photo, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction GerantDashboardComponent_div_9_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\", 19);\n    i0.ɵɵtemplate(2, GerantDashboardComponent_div_9_div_9_img_2_Template, 1, 2, \"img\", 20);\n    i0.ɵɵelementStart(3, \"div\", 8)(4, \"h5\", 9);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 21);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 21);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function GerantDashboardComponent_div_9_div_9_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const produit_r4 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.updateProduit(produit_r4);\n    });\n    i0.ɵɵtext(11, \"Modifier\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function GerantDashboardComponent_div_9_div_9_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const produit_r4 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.deleteProduit(produit_r4.id);\n    });\n    i0.ɵɵtext(13, \"Supprimer\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const produit_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", produit_r4.photo);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(produit_r4.nomProd);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Prix: \", produit_r4.prix, \"\\u20AC\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Disponible: \", produit_r4.disponible ? \"Oui\" : \"Non\", \"\");\n  }\n}\n\nfunction GerantDashboardComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"h2\", 11)(2, \"button\", 12);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 13)(5, \"div\", 14)(6, \"div\", 2)(7, \"input\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function GerantDashboardComponent_div_9_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.produitSearch = $event;\n    })(\"input\", function GerantDashboardComponent_div_9_Template_input_input_7_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.searchProduits();\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 16);\n    i0.ɵɵtemplate(9, GerantDashboardComponent_div_9_div_9_Template, 14, 4, \"div\", 17);\n    i0.ɵɵpipe(10, \"filterByFamille\");\n    i0.ɵɵelementStart(11, \"div\", 18)(12, \"div\", 7)(13, \"div\", 8)(14, \"h5\", 9);\n    i0.ɵɵtext(15, \"Ajouter un Produit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function GerantDashboardComponent_div_9_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const famille_r2 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.createProduit(famille_r2.id);\n    });\n    i0.ɵɵtext(17, \"+\");\n    i0.ɵɵelementEnd()()()()()()()();\n  }\n\n  if (rf & 2) {\n    const famille_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵattribute(\"data-bs-target\", \"#collapse\" + famille_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", famille_r2.intitule, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", \"collapse\" + famille_r2.id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.produitSearch);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(10, 5, ctx_r1.produits, famille_r2.id));\n  }\n}\n\nexport let GerantDashboardComponent = /*#__PURE__*/(() => {\n  class GerantDashboardComponent {\n    constructor(dataService, authService, data) {\n      this.dataService = dataService;\n      this.authService = authService;\n      this.data = data;\n      this.fastfood = null;\n      this.familles = [];\n      this.produits = [];\n      this.familleSearch = '';\n      this.produitSearch = '';\n      this.user = this.data.actualUser; //this.familles =\n    }\n\n    ngOnInit() {\n      this.loadFastfood();\n      this.loadFamilles();\n      this.loadProduits();\n    }\n\n    loadFastfood() {// if (this.user?.fastfood) {\n      //   this.dataService.getFastfoodById(this.user.fastfood.fastfoodId).subscribe(fastfood => this.fastfood = fastfood);\n      //\n      // }\n    }\n\n    loadFamilles() {\n      this.dataService.getAllFamilleProduits().subscribe(familles => this.familles = familles);\n    }\n\n    loadProduits() {// if (this.user?.fastfood) {\n      //   this.dataService.getAllProduits().subscribe(produits => {\n      //     this.produits = produits.filter(p => p.fastfoodId === this.user?.fastfood?.fastfoodId);\n      //   });\n      // }\n    }\n\n    searchFamilles() {// Implémenter si endpoint search existe\n    }\n\n    searchProduits() {// if (this.produitSearch) {\n      //   this.dataService.searchProduits(this.produitSearch).subscribe(produits => {\n      //     this.produits = produits.filter(p => p.fastfoodId === this.user?.fastfood?.fastfoodId);\n      //   });\n      // } else {\n      //   this.loadProduits();\n      // }\n    }\n\n    createFamille() {\n      const newFamille = {\n        id: 0,\n        intitule: 'Nouvelle Famille'\n      };\n      this.dataService.createFamilleProduit(newFamille).subscribe(() => this.loadFamilles());\n    }\n\n    createProduit(familleId) {// const newProduit: Produit = {\n      //   id: 0,\n      //   nomProd: 'Nouveau Produit',\n      //   prix: 0,\n      //   familleProduitId: familleId,\n      //   disponible: true,\n      //   fastfoodId: this.user?.fastfood?.fastfoodId\n      // };\n      // this.dataService.createProduit(newProduit).subscribe(() => this.loadProduits());\n    }\n\n    updateProduit(produit) {\n      this.dataService.updateProduit(produit.id, produit).subscribe(() => this.loadProduits());\n    }\n\n    deleteProduit(id) {\n      this.dataService.deleteProduit(id).subscribe(() => this.loadProduits());\n    }\n\n  }\n\n  GerantDashboardComponent.ɵfac = function GerantDashboardComponent_Factory(t) {\n    return new (t || GerantDashboardComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i1.DataService));\n  };\n\n  GerantDashboardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GerantDashboardComponent,\n    selectors: [[\"app-gerant-dashboard\"]],\n    decls: 17,\n    vars: 5,\n    consts: [[1, \"container\", \"mt-5\"], [4, \"ngIf\"], [1, \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Rechercher une famille\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"id\", \"familleAccordion\", 1, \"accordion\"], [\"class\", \"accordion-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"accordion-item\"], [1, \"card\", \"text-center\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"accordion-header\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", 1, \"accordion-button\"], [1, \"accordion-collapse\", \"collapse\", 3, \"id\"], [1, \"accordion-body\"], [\"type\", \"text\", \"placeholder\", \"Rechercher un produit\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"row\"], [\"class\", \"col-md-4 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\", \"mb-3\"], [1, \"card\"], [\"class\", \"card-img-top\", 3, \"src\", \"alt\", 4, \"ngIf\"], [1, \"card-text\"], [1, \"btn\", \"btn-warning\", \"me-2\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"card-img-top\", 3, \"src\", \"alt\"]],\n    template: function GerantDashboardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2, \"Gestion du Fastfood \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"p\");\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, GerantDashboardComponent_div_5_Template, 5, 2, \"div\", 1);\n        i0.ɵɵelementStart(6, \"div\", 2)(7, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function GerantDashboardComponent_Template_input_ngModelChange_7_listener($event) {\n          return ctx.familleSearch = $event;\n        })(\"input\", function GerantDashboardComponent_Template_input_input_7_listener() {\n          return ctx.searchFamilles();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 4);\n        i0.ɵɵtemplate(9, GerantDashboardComponent_div_9_Template, 18, 8, \"div\", 5);\n        i0.ɵɵelementStart(10, \"div\", 6)(11, \"div\", 7)(12, \"div\", 8)(13, \"h5\", 9);\n        i0.ɵɵtext(14, \"Ajouter une Famille\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function GerantDashboardComponent_Template_button_click_15_listener() {\n          return ctx.createFamille();\n        });\n        i0.ɵɵtext(16, \"+\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate2(\" \", ctx.user == null ? null : ctx.user.nom, \" : \", ctx.user == null ? null : ctx.user.role, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.fastfood);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.familleSearch);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.familles);\n      }\n    },\n    directives: [i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i3.NgForOf],\n    pipes: [i5.FilterByFamillePipe],\n    styles: [\".card[_ngcontent-%COMP%]{transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-img-top[_ngcontent-%COMP%]{max-height:150px;object-fit:cover}\"]\n  });\n  return GerantDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}